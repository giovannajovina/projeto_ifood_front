<!DOCTYPE html>
<html lang="pt-br">
    
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Clone iFood</title>
        <link rel="stylesheet" href="./style.css">
        <script src="../config.js"></script>
        <script src="./index.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBkykjH21ut-e8c_F90tJmgO6IX2KvALZ4&libraries=places&callback=initAutocomplete" async defer></script>

</head>

<body>
    <header>
        <div class="logo">iFood Clone</div>
        
        <div class="navbar">
     
            <div class="search-bar">
                <input type="text" placeholder="Busque por item ou loja">
            </div>
            <div class="icons">
                <button id="openModalBtn">Escolher Endere√ßo</button>
                <span class="location-icon" onclick="toggleModal()">üìç</span>
                <span>üõí</span>
            </div>
            <div class="menu-toggle" onclick="toggleMenu()">‚ò∞</div>
        </div>
        <div class="mobile-nav" id="mobileNav">
            <ul>
                <li><a href="#">In√≠cio</a></li>
                <li><a href="#">Restaurantes</a></li>
                <button id="openModalBtn-mobile">Escolher Endere√ßo</button>
            </ul>
        </div>
    </header>
    <div id="addressModal" class="modal_loc">
        <div class="modal_loc-content">
            <span class="close_loc">&times;</span>
            
            <!-- Imagem no topo -->
            <div class="modal-image">
                <img src="./imagens/logo.png" alt="Localiza√ß√£o" />
            </div>
            
            <h2>Onde voc√™ quer receber seu pedido?</h2>
    
            <div class="search-container">
                <input type="text" id="addressSearch" placeholder="Buscar endere√ßo e n√∫mero">
            </div>
    
            <ul id="suggestions"></ul>
            <h3>Endere√ßos Salvos</h3>
            <ul id="savedAddresses"></ul>
    
            <div class="use-location-btn">
                <button id="useMyLocation">Usar minha localiza√ß√£o</button>
            </div>
    
            <p class="login-text">
                J√° tem um endere√ßo salvo? <a href="../entrar/index.html" class="login-link">Entrar ou cadastrar</a>
            </p>
        </div>
    </div>
    <div id="addressDetailsModal" class="modal_loc">
        <div class="modal_loc-content">
            <span class="close_loc" id="closeAddressDetails">&times;</span>
            <h2>Confirme os detalhes do endere√ßo</h2>
            <p id="selectedAddress"></p>
            <input type="text" id="numero" placeholder="N√∫mero">
            <input type="text" id="complemento" placeholder="Complemento">
            <button id="saveAddress">Salvar Endere√ßo</button>
        </div>
    </div>
    <div id="sideModal" class="modal">
        <span class="close-btn" onclick="toggleModal()">&times;</span>
        <div class="nome">
            <h2 > Ol√°, </h2>
            <h2 id="nome"> </h2>
        </div>
        <ul class="menu-list">
            <li><img src="imagens/teste.png" alt="Pedidos">Pedidos</li>
            <li><img src="imagens/teste.png" alt="Pagamento">Pagamento</li>
            <li><img src="imagens/teste.png" alt="Meus Dados">Meus dados</li>
            <li><img src="imagens/teste.png" alt="Meus Dados">Meu endere√ßo</li>
        </ul>
    </div>

    <script>
        function toggleMenu() {
            document.getElementById("mobileNav").classList.toggle("active");
        }
        function toggleModal() {
            document.getElementById('sideModal').classList.toggle('active');
        }
    </script>

    <section class="categories">
        <h2>Conhe√ßa as categorias</h2>
        <div class="carousel-container">
            <button class="carousel-btn prev" onclick="scrollCarousel(-1)">&lt;</button>
            <div class="category-list" id="category-list"></div>
            <button class="carousel-btn next" onclick="scrollCarousel(1)">&gt;</button>
        </div>
    </section>

    <script>

        async function loadCategories() {
            try {
                const apiUrl = config.API_URL+"/api/categories/list";
                console.log("Buscando categorias em:", apiUrl);

                const response = await fetch(apiUrl, {
                    headers: {
                        "bypass-tunnel-reminder": "true"
                    }
                });

                if (!response.ok) {
                    throw new Error(`Erro HTTP: ${response.status} - ${response.statusText}`);
                }

                const categories = await response.json();
                console.log("Categorias recebidas:", categories);

                const categoryList = document.getElementById("category-list");
                categoryList.innerHTML = ""; // Limpa a lista antes de adicionar os itens

                categories.forEach(category => {
                    const div = document.createElement("div");
                    div.classList.add("category");
                    div.innerHTML = `<img src="${category.description}" alt="${category.name}"> ${category.name}`;
                    categoryList.appendChild(div);
                });

            } catch (error) {
                console.error("Erro ao carregar categorias:", error);
                alert("Erro ao carregar categorias. Verifique o console para mais detalhes.");
            }

        };
        loadCategories();
        function scrollCarousel(direction) {
            const carousel = document.getElementById('category-list');
            const scrollAmount = 220;
            carousel.scrollBy({ left: direction * scrollAmount, behavior: 'smooth' });
        }
    </script>
    <section class="banner">

        <div class="carousel-container">
            <button class="carousel-btn prev" onclick="scrollCarouselbanner(-1)">&lt;</button>
            <div class="banner-list" id="banner-list"></div>
            <button class="carousel-btn next" onclick="scrollCarouselbanner(1)">&gt;</button>
        </div>
    </section>
    <!-- <script>

        async function loadBanner() {
            try {
                const apiUrl = config.API_URL+"/api/banner/list";
                console.log("Buscando banner em:", apiUrl);

                const response = await fetch(apiUrl, {
                    headers: {
                        "bypass-tunnel-reminder": "true"
                    }
                });

                if (!response.ok) {
                    throw new Error(`Erro HTTP: ${response.status} - ${response.statusText}`);
                }

                const banner = await response.json();
                console.log("banner recebidas:", banner);

                const bannerList = document.getElementById("banner-list");
                bannerList.innerHTML = ""; // Limpa a lista antes de adicionar os itens

                banner.forEach(banner => {
                    const div = document.createElement("div");
                    div.classList.add("banner");
                    div.innerHTML = `<img src="${banner.description}" alt="${banner.name}"> ${banner.name}`;
                    bannerList.appendChild(div);
                });

            } catch (error) {
                console.error("Erro ao carregar banner:", error);
                alert("Erro ao carregar banner. Verifique o console para mais detalhes.");
            }

        };
        loadBanner();
        function scrollCarousel(direction) {
            const carousel = document.getElementById('banner-list');
            const scrollAmount = 220;
            carousel.scrollBy({ left: direction * scrollAmount, behavior: 'smooth' });
        }
    </script> -->
    <script>
        const banner = [
            { name: "Sorvetes", image: "https://static.ifood-static.com.br/image/upload/t_high/discoveries/1306PromotionsCampanhasSeloPIJCampanhasAlwaysOncafeprincipal_sMXA.png?imwidth=3840" },
            { name: "Italiana", image: "https://static.ifood-static.com.br/image/upload/t_high/discoveries/1306PromotionsCampanhasSeloPIJCampanhasAlwaysOncafeprincipal_sMXA.png?imwidth=3840" },
            { name: "Pastel", image: "https://static.ifood-static.com.br/image/upload/t_high/discoveries/1306PromotionsCampanhasSeloPIJCampanhasAlwaysOncafeprincipal_sMXA.png?imwidth=3840" },
            { name: "Pizza", image: "https://static.ifood-static.com.br/image/upload/t_high/discoveries/1306PromotionsCampanhasSeloPIJCampanhasAlwaysOncafeprincipal_sMXA.png?imwidth=3840" },
            { name: "Marmita", image: "https://static.ifood-static.com.br/image/upload/t_high/discoveries/1306PromotionsCampanhasSeloPIJCampanhasAlwaysOncafeprincipal_sMXA.png?imwidth=3840" },
            { name: "Vegetariana", image: "https://static.ifood-static.com.br/image/upload/t_high/discoveries/1306PromotionsCampanhasSeloPIJCampanhasAlwaysOncafeprincipal_sMXA.png?imwidth=3840" },
            { name: "Gourmet", image: "https://static.ifood-static.com.br/image/upload/t_high/discoveries/1306PromotionsCampanhasSeloPIJCampanhasAlwaysOncafeprincipal_sMXA.png?imwidth=3840" },
            { name: "Japonesa", image: "https://static.ifood-static.com.br/image/upload/t_high/discoveries/1306PromotionsCampanhasSeloPIJCampanhasAlwaysOncafeprincipal_sMXA.png?imwidth=3840" },
            { name: "Carnes", image: "https://static.ifood-static.com.br/image/upload/t_high/discoveries/1306PromotionsCampanhasSeloPIJCampanhasAlwaysOncafeprincipal_sMXA.png?imwidth=3840" },
            { name: "Chinesa", image: "https://static.ifood-static.com.br/image/upload/t_high/discoveries/1306PromotionsCampanhasSeloPIJCampanhasAlwaysOncafeprincipal_sMXA.png?imwidth=3840" },
            { name: "Seila", image: "https://static.ifood-static.com.br/image/upload/t_high/discoveries/1306PromotionsCampanhasSeloPIJCampanhasAlwaysOncafeprincipal_sMXA.png?imwidth=3840" },
            { name: "Comidinha", image: "https://static.ifood-static.com.br/image/upload/t_high/discoveries/1306PromotionsCampanhasSeloPIJCampanhasAlwaysOncafeprincipal_sMXA.png?imwidth=3840" },
            { name: "Comidona", image: "https://static.ifood-static.com.br/image/upload/t_high/discoveries/1306PromotionsCampanhasSeloPIJCampanhasAlwaysOncafeprincipal_sMXA.png?imwidth=3840" },
            { name: "Testando", image: "https://static.ifood-static.com.br/image/upload/t_high/discoveries/1306PromotionsCampanhasSeloPIJCampanhasAlwaysOncafeprincipal_sMXA.png?imwidth=3840" },
            { name: "OutroTest", image: "https://static.ifood-static.com.br/image/upload/t_high/discoveries/1306PromotionsCampanhasSeloPIJCampanhasAlwaysOncafeprincipal_sMXA.png?imwidth=3840" },
            { name: "Japonesa", image: "https://static.ifood-static.com.br/image/upload/t_high/discoveries/1306PromotionsCampanhasSeloPIJCampanhasAlwaysOncafeprincipal_sMXA.png?imwidth=3840" }
        ];
        const bannerlist = document.getElementById("banner-list");

        banner.forEach(banner => {
            const div = document.createElement("div");
            div.classList.add("banner");
            div.innerHTML = `<img src="${banner.image}" alt="${banner.name}">${banner.name}`;
            bannerlist.appendChild(div);
        });

        function scrollCarouselbanner(direction) {
            const carousel = document.getElementById('banner-list');
            const scrollAmount = 220;
            carousel.scrollBy({ left: direction * scrollAmount, behavior: 'smooth' });
        }
    </script>

    <section class="filters">
        <button onclick="toggleFilterMenu('order')">Ordenar </button>
        <button onclick="toggleFilterMenu('vale')">Vale-refei√ß√£o </button>
        <button onclick="toggleFilterMenu('distance')">Dist√¢ncia </button>
        <button onclick="toggleFilterMenu('order')">Ordenar </button>
        <button onclick="toggleFilterMenu('order')">Ordenar </button>
        <button onclick="toggleFilterMenu('vale')">Vale-refei√ß√£o </button>
        <button onclick="toggleFilterMenu('distance')">Dist√¢ncia </button>
        <button onclick="toggleFilterMenu('distance')">Dist√¢ncia </button>
        <button onclick="toggleFilterMenu('filters')">Filtros ‚öô</button>
    </section>

    <div class="filter-menu" id="filterMenu">
        <div class="filter-header">
            <h3>Filtros</h3>
            <span style="color: red; cursor: pointer;" onclick="toggleFilterMenu('')">Limpar</span>
        </div>
        <div class="filter-tabs">
            <span class="active" onclick="showTab('basicos')">B√°sicos</span>
            <span onclick="showTab('categorias')">Categorias</span>
            <span onclick="showTab('pagamentos')">Pagamentos</span>
        </div>
        <div class="filter-content" id="basicos">
            <h4>Modo de entrega</h4>
            <div class="filter-options">
                <button>Entrega</button>
                <button>Pra retirar</button>
            </div>
            <h4>Ordenar por</h4>
            <div class="filter-options">
                <button>Ordena√ß√£o</button>
                <button>Pre√ßo</button>
                <button>Avalia√ß√£o</button>
                <button>Tempo</button>
                <button>Taxa</button>
                <button>Menor Dist√¢ncia</button>
            </div>
        </div>
        <div class="filter-content" id="categorias" style="display: none;">
            <h4>Tipo de loja</h4>
            <div class="filter-options">
                <button>Todas as lojas</button>
                <button>Restaurante</button>
                <button>Mercado</button>
            </div>
        </div>
        <div class="filter-content" id="pagamentos" style="display: none;">
            <h4>Pre√ßo m√©dio</h4>
            <div class="filter-options">
                <button>$</button>
                <button>$$</button>
                <button>$$$</button>
                <button>$$$$</button>
                <button>$$$$$</button>
            </div>
            <h4>Pagamento pelo site</h4>
            <div class="filter-options">
                <button>Pix</button>
                <button>Elo</button>
                <button>Mastercard</button>
                <button>Mastercard Maestro</button>
                <button>Visa</button>
                <button>Visa Electron</button>
                <button>Amex</button>
                <button>Diners</button>
            </div>
        </div>
        <div class="apply-filter" onclick="toggleFilterMenu('')">Ver resultados</div>
    </div>

    <script>
        function toggleFilterMenu(type) {
            const menu = document.getElementById('filterMenu');
            if (type === 'filters') {
                menu.classList.add('active');
            } else {
                menu.classList.remove('active');
            }
        }
        function showTab(tab) {
            document.querySelectorAll('.filter-content').forEach(el => el.style.display = 'none');
            document.getElementById(tab).style.display = 'block';
        }
    </script>

    <section class="store-list" id="store-list"></section>

    <script>
        const stores = [
            { name: "Churrascaria e Restaurante", rating: "4.8", category: "Brasileira", distance: "2.2 km", time: "42-52 min", price: "R$ 10,99", image: "https://static.ifood-static.com.br/image/upload/t_medium/logosgde/06b1ec5f-2c6e-45db-82c9-79f9d86897b7/202404241342_hbVX_i.jpg?imwidth=256" },
            { name: "Seringueira Express", rating: "4.8", category: "Brasileira", distance: "2.2 km", time: "49-59 min", price: "R$ 9,99", image: "https://static.ifood-static.com.br/image/upload/t_medium/logosgde/06b1ec5f-2c6e-45db-82c9-79f9d86897b7/202404241342_hbVX_i.jpg?imwidth=256" },
            { name: "Rei das Marmitas", rating: "4.9", category: "Marmita", distance: "2.8 km", time: "39-49 min", price: "R$ 14,99", image: "https://static.ifood-static.com.br/image/upload/t_medium/logosgde/06b1ec5f-2c6e-45db-82c9-79f9d86897b7/202404241342_hbVX_i.jpg?imwidth=256" },
            { name: "Churrascaria e Restaurante", rating: "4.8", category: "Brasileira", distance: "2.2 km", time: "42-52 min", price: "R$ 10,99", image: "https://static.ifood-static.com.br/image/upload/t_medium/logosgde/06b1ec5f-2c6e-45db-82c9-79f9d86897b7/202404241342_hbVX_i.jpg?imwidth=256" },
            { name: "Seringueira Express", rating: "4.8", category: "Brasileira", distance: "2.2 km", time: "49-59 min", price: "R$ 9,99", image: "https://static.ifood-static.com.br/image/upload/t_medium/logosgde/06b1ec5f-2c6e-45db-82c9-79f9d86897b7/202404241342_hbVX_i.jpg?imwidth=256" },
            { name: "Rei das Marmitas", rating: "4.9", category: "Marmita", distance: "2.8 km", time: "39-49 min", price: "R$ 14,99", image: "https://static.ifood-static.com.br/image/upload/t_medium/logosgde/06b1ec5f-2c6e-45db-82c9-79f9d86897b7/202404241342_hbVX_i.jpg?imwidth=256" },
            { name: "Churrascaria e Restaurante", rating: "4.8", category: "Brasileira", distance: "2.2 km", time: "42-52 min", price: "R$ 10,99", image: "https://static.ifood-static.com.br/image/upload/t_medium/logosgde/06b1ec5f-2c6e-45db-82c9-79f9d86897b7/202404241342_hbVX_i.jpg?imwidth=256" },
            { name: "Seringueira Express", rating: "4.8", category: "Brasileira", distance: "2.2 km", time: "49-59 min", price: "R$ 9,99", image: "https://static.ifood-static.com.br/image/upload/t_medium/logosgde/06b1ec5f-2c6e-45db-82c9-79f9d86897b7/202404241342_hbVX_i.jpg?imwidth=256" },
            { name: "Rei das Marmitas", rating: "4.9", category: "Marmita", distance: "2.8 km", time: "39-49 min", price: "R$ 14,99", image: "https://static.ifood-static.com.br/image/upload/t_medium/logosgde/06b1ec5f-2c6e-45db-82c9-79f9d86897b7/202404241342_hbVX_i.jpg?imwidth=256" },
            { name: "Churrascaria e Restaurante", rating: "4.8", category: "Brasileira", distance: "2.2 km", time: "42-52 min", price: "R$ 10,99", image: "https://static.ifood-static.com.br/image/upload/t_medium/logosgde/06b1ec5f-2c6e-45db-82c9-79f9d86897b7/202404241342_hbVX_i.jpg?imwidth=256" },
            { name: "Seringueira Express", rating: "4.8", category: "Brasileira", distance: "2.2 km", time: "49-59 min", price: "R$ 9,99", image: "https://static.ifood-static.com.br/image/upload/t_medium/logosgde/06b1ec5f-2c6e-45db-82c9-79f9d86897b7/202404241342_hbVX_i.jpg?imwidth=256" },
            { name: "Rei das Marmitas", rating: "4.9", category: "Marmita", distance: "2.8 km", time: "39-49 min", price: "R$ 14,99", image: "https://static.ifood-static.com.br/image/upload/t_medium/logosgde/06b1ec5f-2c6e-45db-82c9-79f9d86897b7/202404241342_hbVX_i.jpg?imwidth=256" }

        ];

        const storeList = document.getElementById("store-list");

        stores.forEach(store => {
            const div = document.createElement("div");
            div.classList.add("store");
            div.innerHTML = `<img src="${store.image}" alt="${store.name}"><div class="store-info"><strong>${store.name}</strong><span>‚≠ê ${store.rating} ‚Ä¢ ${store.category} ‚Ä¢ ${store.distance}</span><span>${store.time} ‚Ä¢ ${store.price}</span></div>`;
            storeList.appendChild(div);
        });
    </script>
        <script>
            // Verifica se o usu√°rio est√° autenticado
            const user = JSON.parse(localStorage.getItem("user"));
            const token = localStorage.getItem("token");
    
            if (!user || !token) {
                window.location.href = "../login/index.html"; // Redireciona para login se n√£o estiver autenticado
            } else {
                document.getElementById("nome").textContent = user.nome;
            }
    
            // // Logout
            // document.getElementById("logoutButton").addEventListener("click", async () => {
            //     await fetch("http://seu-servidor/api/logout", {
            //         method: "POST",
            //         headers: { "Authorization": "Bearer " + token }
            //     });
    
            //     // Remove token e redireciona para o login
            //     localStorage.removeItem("token");
            //     localStorage.removeItem("user");
            //     window.location.href = "index.html";
            // });
        </script>
</body>

</html>

